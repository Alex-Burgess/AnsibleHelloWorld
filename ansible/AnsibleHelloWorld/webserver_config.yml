---
- name: Configuration
  hosts: webservers
  become: true
  tasks:
  - name: Synchronize hellworld.com conf directory
    synchronize:
      src: /app/applications/helloworld.com/httpConfiguration/httpd/conf/
      dest: /etc/httpd/conf/
      delete: yes
      recursive: yes
    register: conf_directory
  - name: Restart httpd instance if configuration updates were made
    service: name=httpd state=restarted
    when: conf_directory.changed
